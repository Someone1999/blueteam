### **Blue Team CTF â€“ 1-savol: Infratuzilmadagi Zaif Sozlamalarni Aniqlash va Bartaraf Etish**  

CTF muhitida sizga tizim yoki infratuzilmada zaif sozlamalar mavjudligi haqida maâ€™lumot berilishi mumkin. Bu zaifliklarni aniqlash va bartaraf etish uchun quyidagi **Blue Team metodlari** ishlatiladi.  

---

## **1. Tizimdagi zaif sozlamalarni aniqlash uchun vositalar**
**A. Operatsion tizim zaifliklarini tekshirish**  
âœ… **Linux:**  
```bash
uname -a   # Kernel versiyasini tekshirish
cat /etc/os-release  # OS versiyasi
sysctl -a | grep "kernel"
```
âœ… **Windows (PowerShell):**  
```powershell
systeminfo
Get-WindowsFeature | Where-Object { $_.Installed -eq $false }
```
**Zaiflik:** Eskirgan operatsion tizim yoki yangilanishlar oâ€˜rnatilmagan.  
**Yechim:** Soâ€˜nggi **OS yangilanishlarini oâ€˜rnatish** va zaif versiyalarni yangilash.

---

**B. Ochiq portlarni tekshirish (Nmap, Netstat)**  
**Linux:**  
```bash
sudo netstat -tulnp   # Faol portlarni koâ€˜rish
sudo lsof -i -P -n    # Portlarni ochgan jarayonlarni koâ€˜rish
```
**Windows:**  
```powershell
netstat -ano
```
**Nmap orqali tarmoqni skanerlash:**  
```bash
nmap -sV -p- <server_IP>
```
**Zaiflik:** Keraksiz yoki eskirgan xizmatlar ochiq turibdi (masalan, Telnet, FTP).  
**Yechim:**  
âœ… **Keraksiz portlarni yopish:**  
```bash
sudo ufw deny 23  # Telnetni bloklash
```
âœ… **Shifrlanmagan protokollarni oâ€˜chirib tashlash (Telnet -> SSH, FTP -> SFTP)**  

---

## **2. Zaif autentifikatsiya va hujumlarni oldini olish**
**A. Foydalanuvchi parollari va sudo sozlamalarini tekshirish**  
âœ… **Soâ€˜nggi kirishlarni tekshirish:**  
```bash
lastlog
cat /etc/passwd | awk -F: '{ print $1}'   # Barcha foydalanuvchilar roâ€˜yxati
```
âœ… **Soâ€˜nggi sudo ishlatish tarixini tekshirish:**  
```bash
cat /var/log/auth.log | grep "sudo"
```
**Zaiflik:** Juda koâ€˜p foydalanuvchiga sudo ruxsatlari berilgan yoki oddiy parollar ishlatilgan.  
**Yechim:**  
- Keraksiz sudo ruxsatlarini olib tashlash:  
  ```bash
  sudo deluser user sudo
  ```
- Parollarni tekshirish va kuchli parol talabini majburiy qilish.  
  ```bash
  sudo nano /etc/security/pwquality.conf
  ```

---

## **3. Xavfsiz SSH sozlamalarini tekshirish**  
**A. Root kirishini bloklash va kuchli shifrlashni yoqish**  
```bash
sudo nano /etc/ssh/sshd_config
```
Oâ€˜zgartirishlar:  
```bash
PermitRootLogin no
PasswordAuthentication no
KexAlgorithms curve25519-sha256@libssh.org
```
Soâ€˜ng, SSH xizmatini qayta yuklash:  
```bash
sudo systemctl restart sshd
```
**Zaiflik:** Root foydalanuvchisi orqali SSH orqali bevosita tizimga kirish mumkin.  
**Yechim:** Root foydalanuvchi uchun SSH loginni oâ€˜chirib qoâ€˜yish va faqat **public key authentication** ishlatish.  

---

## **4. Zaif servislarga qarshi tekshiruv va muhofaza qilish**
**A. Fail2Ban orqali brute-force hujumlardan himoya qilish**  
âœ… **Fail2Ban oâ€˜rnatish va ishga tushirish:**  
```bash
sudo apt install fail2ban -y
sudo systemctl enable fail2ban --now
```
âœ… **SSH uchun avtomatik bloklashni sozlash:**  
```bash
sudo nano /etc/fail2ban/jail.local
```
Qoâ€˜shish:  
```ini
[sshd]
enabled = true
maxretry = 3
bantime = 600
```
âœ… **Fail2Ban xizmatini qayta yuklash:**  
```bash
sudo systemctl restart fail2ban
```
**Zaiflik:** SSH yoki boshqa xizmatlarga **brute-force hujumlar** mumkin.  
**Yechim:** **Fail2Ban yoki iptables orqali avtomatik bloklashni yoqish.**  

---

## **5. Loglarni tahlil qilish va monitoring**
**A. Loglar ichidan shubhali harakatlarni qidirish**  
âœ… **Linux uchun:**  
```bash
sudo cat /var/log/auth.log | grep "Failed password"
sudo cat /var/log/syslog | tail -n 50
```
âœ… **Windows Event Log tekshirish (PowerShell):**  
```powershell
Get-EventLog -LogName Security -Newest 20
```
**Zaiflik:** Koâ€˜p marta notoâ€˜gâ€˜ri parol bilan tizimga kirishga urinishlar bor.  
**Yechim:** Keraksiz urinishlarni bloklash va monitoring qilish.

---

## **6. Firewall qoidalarini tekshirish va himoyalash**
âœ… **Keraksiz portlarni yopish va ruxsatlarni cheklash**  
```bash
sudo ufw status verbose
sudo ufw default deny incoming
sudo ufw allow 22/tcp  # Faqat SSH ga ruxsat berish
sudo ufw enable
```
**Zaiflik:** Tizim **barcha kiruvchi soâ€˜rovlarni** qabul qiladi.  
**Yechim:** **Faqat zarur xizmatlarni ochish va boshqa barcha kiruvchi soâ€˜rovlarni bloklash.**

---

## **7. Docker va Kubernetes xavfsizligini tekshirish**  
**A. Docker konteynerlarini tekshirish**  
```bash
docker ps -a  # Faol konteynerlarni koâ€˜rish
docker images  # Yangi zararli imageâ€™lar bormi?
docker top <container_id>  # Ichki jarayonlarni tekshirish
```
**Zaiflik:** Docker konteynerlari root huquqlari bilan ishlatilgan.  
**Yechim:** Root huquqlarini cheklash va aniq ruxsatlar berish.  
```bash
docker run --user 1001:1001 mycontainer
```

---

## **8. Tarmoq trafikini kuzatish (tcpdump & Wireshark)**
Agar **shubhali tarmoq harakatlari** aniqlansa, real vaqtda kuzatish mumkin.  
```bash
sudo tcpdump -i eth0 port not 22
```
Yoki faqat **DNS soâ€˜rovlarini tahlil qilish:**  
```bash
sudo tcpdump -i eth0 port 53
```
**Zaiflik:** Noâ€˜rinli yoki zararli trafik kuzatilmoqda.  
**Yechim:** IDS/IPS (Snort yoki Suricata) oâ€˜rnatish va trafikni filtrlash.

---

## **Xulosa**
### **ðŸ”¹ Zaifliklar:**
âœ… **Eskirgan OS yoki servislar (Kernel versiyasini yangilash)**  
âœ… **Keraksiz portlar ochiq (Nmap bilan tekshirish, UFW bilan bloklash)**  
âœ… **Zaif autentifikatsiya (Root loginni bloklash, kuchli parol talab qilish)**  
âœ… **Brute-force hujumlar (Fail2Ban yoki iptables bilan himoya qilish)**  
âœ… **Shubhali log harakatlari (Failed login attempts aniqlash, monitoring qilish)**  

**ðŸ”¹ Muhofaza qilish choralari:**  
ðŸš€ **Zaif portlarni yopish**  
ðŸš€ **Firewall qoidalarini kuchaytirish**  
ðŸš€ **Brute-force hujumlarga qarshi Fail2Ban oâ€˜rnatish**  
ðŸš€ **Zararli IP-manzillarni bloklash**  
ðŸš€ **Docker va Kubernetes xavfsizligini tekshirish**  
ðŸš€ **Real vaqtdagi trafikni tahlil qilish va IDS/IPS sozlash**  

Agar CTF vazifasida sizga **muayyan tizim yoki serverga kirish imkoniyati berilgan boâ€˜lsa**, yuqoridagi vositalarni ishlatib, **konkret zaifliklarni aniqlash va bartaraf etish** kerak. Siz aynan qanday turdagi infratuzilmada ishlayapsiz?
